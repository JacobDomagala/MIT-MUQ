<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MUQ: MUQ Installation Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MUQ
   &#160;<span id="projectnumber">0.02</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('muqinstall.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MUQ Installation Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Getting"></a>
MUQ</h1>
<p>MUQ is hosted on our <a href="https://bitbucket.org/mituq/muq">BitBucket site</a>. To get the source code, you can clone our git repository by running </p><div class="fragment"><div class="line">git clone https://bitbucket.org/mituq/muq</div></div><!-- fragment --><p> in a terminal. While it is usually better to clone our repository, so you can easily obtain updates and bugfixes, you can also download a version of MUQ <a href="https://bitbucket.org/mituq/muq/downloads">here</a>.</p>
<h1><a class="anchor" id="Dependencies"></a>
Dependencies</h1>
<p>MUQ requires several libraries and can use features from several more, which are optional dependencies. The required dependencies are:</p><ul>
<li><a href="http://www.boost.org/">Boost</a> (General c++ tools, graph library, and serialization)</li>
<li><a href="http://eigen.tuxfamily.org/">Eigen</a> (Templated linear algebra package)</li>
<li><a href="http://www.cs.ubc.ca/research/flann/">FLANN</a> (Fast nearest neighbor library)</li>
<li><a href="http://www.hdfgroup.org/HDF5/">HDF5</a> (Structured binary file library)</li>
<li><a href="http://computation.llnl.gov/casc/sundials/main.html">SUNDIALS</a> (ODE/DAE Integrator and nonlinear solver)</li>
</ul>
<p>The optional dependencies include:</p><ul>
<li><a href="http://libmesh.sourceforge.net/">LibMesh</a> (PDE library)</li>
<li><a href="https://code.google.com/p/google-glog/">GLOG</a> (Google logging framework)</li>
<li><a href="https://code.google.com/p/googletest/">GTEST</a> (Google testing framework)</li>
<li><a href="http://trilinos.sandia.gov/packages/">Sacado</a> (Automatic differentiation library in Trilinos)</li>
<li><a href="http://ab-initio.mit.edu/wiki/index.php/NLopt">NLOPT</a> (Nonlinear optimization library)</li>
<li><a href="http://mc-stan.org/">Stan</a> (Hamiltonian MCMC sampler)</li>
<li><a href="http://arma.sourceforge.net/">Armadillo</a> (Linear algebra library)</li>
<li><a href="http://software.intel.com/en-us/intel-mkl">Intel MKL</a> (BLAS and LAPACK routines to accelerate Eigen)</li>
<li><a href="https://www.python.org/">Python</a> (Easy to use programming language)</li>
</ul>
<p>In the past, this large number of dependencies has made installation difficult. However, we have dramatically improved the build process with some more advanced cmake tools. Now, during the MUQ build, if required libraries are not found or can not be linked against, cmake will download the package and install the dependency in a local “external” folder.</p>
<h1><a class="anchor" id="bi"></a>
Basic installation</h1>
<p>The most basic installation of MUQ can be performed by simply changing into the build directory and running cmake with an optional install prefix. This will produce a makefile and MUQ can then be compiled by running make. This two step process is illustrated below: </p><div class="fragment"><div class="line">cd build</div><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/my/install/path ..</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><p> With this command, cmake will look for all required libraries in default locations and will default to turning off all optional dependencies. It is important to recall that MUQ makes extensive use of c++11 features. Thus, to compile MUQ with this simple command, the default c++ compiler must support c++11. g++ 4.7 or later will work, as will recent versions of clang.</p>
<p>At the end of the cmake run, a log file (summary.log) will be produced in the build directory and echoed to the screen. This summary will list what optional dependencies are being used, the compiler to bed used, and where cmake found the required libraries. An example of this summary is below: </p><div class="fragment"><div class="line">#############################################</div><div class="line">#</div><div class="line">#  MUQ configuration:</div><div class="line">#        CMAKE_BUILD_TYPE:         Release</div><div class="line">#        BUILD_SHARED_LIBS:        ON</div><div class="line">#        BUILD_STATIC_LIBS:        OFF</div><div class="line">#        CMAKE_INSTALL_PREFIX:     /Users/mparno/Desktop/MUQ_INSTALL</div><div class="line">#        CMAKE_SOURCE_DIR:         /Users/mparno/Documents/Repositories/MUQ/uqlab/MUQ</div><div class="line">#        CMAKE_BINARY_DIR:         /Users/mparno/Documents/Repositories/MUQ/uqlab/MUQ/build</div><div class="line">#        CMAKE_CXX_COMPILER name:  GNU 4.8.3 on platform Darwin i386</div><div class="line">#        CMAKE_CXX_COMPILER path:  /usr/local/bin/g++-4.8</div><div class="line">#</div><div class="line">#  Compiler flags used for this build:</div><div class="line">#        CMAKE_CXX_FLAGS:        -std=c++11 -Wall -g -Wno-maybe-uninitialized -Wno-sign-compare -Wno-unknown-pragmas -Wno-unused-variable -Wno-unused-local-typedefs -O3</div><div class="line">#</div><div class="line">#  Compiler definitions used for this build:</div><div class="line">#        COMPILE_DEFINITIONS:   MUQ_USE_NLOPT</div><div class="line">#</div><div class="line">#  Required dependencies: </div><div class="line">#        EIGEN3 --------------&gt; Met with internal build -- Failed compilation test.</div><div class="line">#</div><div class="line">#        BOOST ---------------&gt; Met with existing library:</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libboost_system.dylib</div><div class="line">#                                  /usr/local/lib/libboost_filesystem.dylib</div><div class="line">#                                  /usr/local/lib/libboost_regex.dylib</div><div class="line">#                                  /usr/local/lib/libboost_serialization.dylib</div><div class="line">#                                  /usr/local/lib/libboost_graph.dylib</div><div class="line">#                                  /usr/local/lib/libboost_date_time.dylib</div><div class="line">#</div><div class="line">#        HDF5 ----------------&gt; Met with existing library:</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libhdf5.dylib</div><div class="line">#</div><div class="line">#        HDF5HL --------------&gt; Met with existing library:</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libhdf5_hl.dylib</div><div class="line">#</div><div class="line">#        FLANN ---------------&gt; Met with existing library:</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libflann.dylib</div><div class="line">#</div><div class="line">#        SUNDIALS ------------&gt; Met with existing library:</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libsundials_cvodes.a</div><div class="line">#                                  /usr/local/lib/libsundials_idas.a</div><div class="line">#                                  /usr/local/lib/libsundials_kinsol.a</div><div class="line">#                                  /usr/local/lib/libsundials_nvecserial.a</div><div class="line">#</div><div class="line">#</div><div class="line">#  Optional dependencies:</div><div class="line">#        GLOG: ----------------&gt; OFF.</div><div class="line">#</div><div class="line">#        GTEST ---------------&gt; ON.</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/lib/libgtest.a</div><div class="line">#</div><div class="line">#        SACADO: --------------&gt; OFF.</div><div class="line">#</div><div class="line">#        LIBMESH: -------------&gt; OFF.</div><div class="line">#</div><div class="line">#        NLOPT ---------------&gt; ON.</div><div class="line">#                                Include Directory:</div><div class="line">#                                  /usr/local/include</div><div class="line">#                                Libraries:</div><div class="line">#                                  /usr/local/lib/libnlopt.dylib</div><div class="line">#</div><div class="line">#        ARMADILLO: -----------&gt; OFF.</div><div class="line">#</div><div class="line">#</div><div class="line">#  Optional tools:   </div><div class="line">#        MPI: -----------------&gt; OFF</div><div class="line">#        OpenMP: --------------&gt; OFF</div><div class="line">#        CUDA: ----------------&gt; OFF</div><div class="line">#        MKL: -----------------&gt; OFF</div><div class="line">#        Python: --------------&gt; OFF</div><div class="line">#</div><div class="line">#  MUQ Modules:   </div><div class="line">#        Utilities:              (BUILD=ON,TESTS=ON)</div><div class="line">#        Modelling:              (BUILD=ON,TESTS=ON)</div><div class="line">#        Polynomial Chaos:       (BUILD=ON,TESTS=ON,EXAMPLES=OFF)</div><div class="line">#        Inference:              (BUILD=ON,TESTS=ON,EXAMPLES=ON)</div><div class="line">#        Optimization:           (BUILD=ON,TESTS=ON)</div><div class="line">#        PDE:                    (BUILD=OFF,TESTS=OFF)</div><div class="line">#        Incremental Approx.:    (BUILD=ON,TESTS=ON,EXAMPLES=OFF)</div><div class="line">#        Geostats:               (BUILD=ON,TESTS=ON,EXAMPLES=OFF)</div><div class="line">#        Regression:             (BUILD=ON,TESTS=ON)</div><div class="line">#</div><div class="line">#############################################</div></div><!-- fragment --><p> From the summary, we can see that most of the required libraries were already installed, and found in the usual /usr/local location. However, the summary shows that Eigen was not found and will be built during the MUQ compilation. If the summary shows that a library was found when you know it exists on your system, you can easily specify the library location by adding "-DMUQ_&lt;DepdencyName&gt;_DIR=&lt;PathToLibrary&gt;" to the cmake call. This procedure is outlined in the advanced installation procedure below.</p>
<h1><a class="anchor" id="ci"></a>
Advanced installation</h1>
<h2><a class="anchor" id="ci1"></a>
Specifying dependency locations</h2>
<p>In some cases, cmake might not be able to find libraries on your system, or you might want to use a different version of the library than what is present in the standard locations. This can be done by manually specifying to root directory of the library. For example, if my SUNDIALS libraries are installed in /path/to/sundials/lib, and my SUNDIALS header files are installed in /path/to/sundials/include, I can pass this information on to cmake with the following command: </p><div class="fragment"><div class="line">cmake -DMUQ_SUNDIALS_DIR=/path/to/sundials ..</div></div><!-- fragment --><p> In general, the root directory for the <em>PACKAGE</em> dependency can be set by defining MUQ_<em>PACKAGE</em> _DIR during the call to cmake. Also notice that the path given to sundials does not have last "include" or "lib" folder. The cmake scripts in MUQ will automatically add these later on.</p>
<h2><a class="anchor" id="ci2"></a>
Using optional dependencies</h2>
<p>Much like the way required library paths can be set. The use of optional libraries can be defined during the cmake call. The use of a package <em>PACKAGE</em> can be turned on or off by defining MUQ_USE_<em>PACKAGE</em>. For example, the following cmake call turns on all optional dependencies except ARMADILLO.</p>
<div class="fragment"><div class="line">cmake -DMUQ_USE_SACADO=ON                          \</div><div class="line">      -DMUQ_USE_GLOG=ON                            \</div><div class="line">      -DMUQ_USE_GTEST=ON                           \</div><div class="line">      -DMUQ_USE_NLOPT=ON                           \</div><div class="line">      -DMUQ_USE_ARMADILLO=OFF                      \</div><div class="line">      ..</div></div><!-- fragment --><h2><a class="anchor" id="ci3"></a>
Specifying the compiler</h2>
<p>CMake uses the CMAKE_CXX_COMPILER and CMAKE_C_COMPILER to specify the c++ and c compilers. Thus, to specify the compiler used to build MUQ, these variables can be set during the cmake call: </p><div class="fragment"><div class="line">cmake -DCMAKE_CXX_COMPILER=/usr/local/bin/g++-4.7.1 \</div><div class="line">   -DCMAKE_C_COMPILER=/usr/local/bin/gcc-4.7.1   \</div><div class="line">   ..</div></div><!-- fragment --><h2><a class="anchor" id="ci4"></a>
A (more) complete CMake call</h2>
<p>The previous sections have given hints at how to fine tune the MUQ build. Here we provide a single example with most of the available build options. Pieces of this script can be extracted and used independently. </p><div class="fragment"><div class="line">cmake                                             \</div><div class="line">    -DCMAKE_INSTALL_PREFIX=~/Desktop/MUQ_INSTALL  \</div><div class="line">    -DCMAKE_CXX_COMPILER=g++-4.8                  \</div><div class="line">    -DCMAKE_C_COMPILER=gcc-4.8                    \</div><div class="line">    -DMUQ_EIGEN3_DIR=/usr/local/                  \</div><div class="line">    -DMUQ_BOOST_DIR=/usr/local/                   \</div><div class="line">    -DMUQ_HDF5_DIR=~/hdf5/install                 \</div><div class="line">    -DMUQ_FLANN_DIR=~/software/flann/             \</div><div class="line">    -DMUQ_SUNDIALS_DIR=/usr/local/                \</div><div class="line">    -DMUQ_USE_SACADO=ON                           \</div><div class="line">    -DMUQ_SACADO_DIR=~/Documents/Trilinos/        \</div><div class="line">    -DMUQ_USE_LIBMESH=ON                          \</div><div class="line">    -DMUQ_LIBMESH_DIR=~/software/libmesh/         \</div><div class="line">    -DMUQ_USE_GLOG=ON                             \</div><div class="line">    -DMUQ_GLOG_DIR=~/software/glog/               \</div><div class="line">    -DMUQ_USE_GTEST=ON                            \</div><div class="line">    -DMUQ_GTEST_DIR=~/software/gtest/             \</div><div class="line">    -DMUQ_USE_NLOPT=ON                            \</div><div class="line">    -DMUQ_NLOPT_DIR=~/software/nlopt/             \</div><div class="line">    -DMUQ_USE_ARMADILLO=OFF                       \</div><div class="line">    -DMUQ_ARMADILLO_DIR=/usr/local/               \</div><div class="line">    -DMUQ_USE_PYTHON=ON                           \</div><div class="line">    -DMUQ_USE_MKL=ON                              \</div><div class="line">    -DMUQ_MKL_DIR=/opt/intel/composerxe-2011/mkl/ \</div><div class="line">    -DMUQ_USE_OPENMPI=OFF                         \</div><div class="line">    -DMUQ_USE_OPENMP=OFF                          \</div><div class="line">..</div></div><!-- fragment --><h2><a class="anchor" id="ci5"></a>
Installing LibMesh</h2>
<p>LibMesh is a large PDE library that MUQ needs for our PDE module. Users need to install LibMesh on their own, but here we give a few tips to help the installation play nicely with MUQ. </p><ul>
<li>
Make sure LibMesh is compiled with the sample compiler as MUQ and that c++11 support is enable. </li>
<li>
Add the "--enable-default-comm-world" flag to the LibMesh configure.  </li>
<li>
When not compiling MUQ with MPI support, disable MPI in LibMesh with the "--disable-mpi" configure flag.  </li>
</ul>
<p>Following these tips, a typical installation of LibMesh can be completed with something like the following commands: </p><div class="fragment"><div class="line">git clone https://github.com/libMesh/libmesh.git</div><div class="line">cd libmesh</div><div class="line">CC=gcc-4.8 CXX=g++-4.8 ./configure --enable-cxx11 --enable-shared --enable-default-comm-world --disable-mpi --prefix=~/LIBMESH_INSTALL/</div><div class="line">make -j4</div><div class="line">make install</div></div><!-- fragment --><h2><a class="anchor" id="ci6"></a>
Installing Sacado</h2>
<p>Sacado is an automatic differentiation package within Sandia National Laboratories' <a href="http://trilinos.sandia.gov/">Trilinos</a> library. MUQ can use Sacado to automatically define model derivatives (including PDE models built on top of LibMesh). The Trilinos install documentation can be found <a href="http://trilinos.sandia.gov/TrilinosBuildQuickRef.html">here</a>. The same tips for installing LibMesh apply to installing Trilinos as well. The general procedure for installing Trilinos is: </p><ol>
<li>
Download the latest Trilinos release from <a href="http://trilinos.sandia.gov/">http://trilinos.sandia.gov/</a> </li>
<li>
Uncompress the source and change into the source directory <div class="fragment"><div class="line">tar -xzvf tar -xzvf trilinos-11.8.1-Source.tar.gz</div><div class="line">cd trilinos-11.8.1-Source</div></div><!-- fragment -->  </li>
<li>
Create a build dir and change into it <div class="fragment"><div class="line">mkdir muq_build</div><div class="line">cd muq_build</div></div><!-- fragment -->  </li>
<li>
Run CMake for the Trilinos build. (see <a class="el" href="ExampleTrilinosBuild.html">Example of Trilinos CMake script for Sacado</a>) </li>
<li>
Run make. <div class="fragment"><div class="line">make -j4</div><div class="line">make install</div></div><!-- fragment -->  </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jul 31 2017 13:57:07 for MUQ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
