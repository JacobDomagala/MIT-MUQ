<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MUQ: /Users/andy/software/muq-private/modules/Modeling/src/WorkPiece.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MUQ
   &#160;<span id="projectnumber">0.02</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('WorkPiece_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WorkPiece.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="WorkPiece_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WorkPiece_8h.html">MUQ/Modeling/WorkPiece.h</a>&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;Eigen/Core&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// define the muq namespace</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacemuq_1_1Modeling.html">muq::Modeling</a>;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with no fixed number of inputs and outputs and variable input/output types.</span></div><div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">    9</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>() : </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  numInputs(-1), <span class="comment">// the number of inputs is unfixed</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  numOutputs(-1), <span class="comment">// the number of ouputs is unfixed</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  id(SetID()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{}</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with either a fixed number of inputs or outputs and variable input/output types.</span></div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a321733d3b551e6a3681f81376be6ce1a">   16</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> num, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">WorkPiece::Fix</a> <span class="keyword">const</span> fix) : </div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? num : -1), <span class="comment">// possibly fix the number of inputs </span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? num : -1), <span class="comment">// possibly fix the number of outputs</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{}</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with either a fixed number of inputs or outputs and variable input/output types.</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0de971304a9b41cabb70ad44f5258c6e">   23</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> numIns, <span class="keywordtype">int</span> <span class="keyword">const</span> numOuts) : </div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(numIns), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(numOuts), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{}</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with either a fixed number of inputs with specified types or a fixed number of outputs with specified types</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a6ffdf61a36a188f3e5269b1a860a1b53">   30</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">WorkPiece::Fix</a> <span class="keyword">const</span> fix) : </div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? types.size() : -1), <span class="comment">// possibly fix the number of inputs </span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? types.size() : -1), <span class="comment">// possibly fix the number of outputs </span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(types) : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the input types</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(types) : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the output types</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{}</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where either some of the inputs have specified types or some of the outputs have specified types</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#af85c413466b9f0839293d879eefe7a2d">   39</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">WorkPiece::Fix</a> <span class="keyword">const</span> fix) :</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(-1), <span class="comment">// the number of inputs is unfixed</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(-1), <span class="comment">// the number of ouputs is unfixed</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? types : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the input types</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(fix==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? types : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the output types</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where either some of the inputs have specified types or some of the outputs have specified types and either the number of inputs or the number of outputs is fixed</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a825085ad12aa46f13b0e3bcdbb18cefc">   48</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>, <span class="keywordtype">int</span> <span class="keyword">const</span> num, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">WorkPiece::Fix</a> <span class="keyword">const</span> fixTypes, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">WorkPiece::Fix</a> <span class="keyword">const</span> fixNum) :</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(fixNum==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? num : -1), <span class="comment">// possibly fix the number of inputs </span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(fixNum==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? num : -1), <span class="comment">// possibly fix the number of outputs </span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(fixTypes==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">Inputs</a>? types : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the input types</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(fixTypes==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html">WorkPiece</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">Fix</a>::<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">Outputs</a>? types : <a class="code" href="namespacestd.html">std</a>::map&lt;unsigned int, <a class="code" href="namespacestd.html">std</a>::string&gt;()), <span class="comment">// possibly fix the output types</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{}  </div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with a fixed number of inputs with specified types and a fixed number of outputs (of uknown type)</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#aca8ae0842e5ec68e1178bd17950d5314">   57</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>, <span class="keywordtype">int</span> <span class="keyword">const</span> num) : </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(types.size()), <span class="comment">// fix the number of inputs </span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(num), <span class="comment">// fix the number of outputs </span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(types)), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with a fixed number of outputs with specified types and a fixed number of inputs (of uknown type)</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a261472ff05a4bb3001f769dd1cb36d0a">   65</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> num, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>) : </div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(num), <span class="comment">// fix the number of inputs </span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(types.size()), <span class="comment">// fix the number of outputs </span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(types)), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{}</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where some of the inputs are known and we know the input and output numbers</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad0bb3140a6e84f96bdc0eae1f9a4cf14">   73</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numIns, <span class="keywordtype">int</span> <span class="keyword">const</span> numOuts) :</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(numIns), <span class="comment">// fix the number inputs</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(numOuts), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where some of the outputs are known and we know the input and output numbers</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae5ff49dd968373160202fd0ae5928f83">   81</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> numIns, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numOuts) :</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(numIns), <span class="comment">// fix the number inputs</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(numOuts), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece with a fixed number of inputs and outputs with specified types</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a7d8837f2319a88ae23eb55f784ab5abc">   89</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; outTypes) : </div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(inTypes.size()), <span class="comment">// fix the number of inputs </span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(outTypes.size()), <span class="comment">// fix the number of outputs </span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(inTypes)), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(outTypes)), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{}</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// Create a muq::Mdoeling::WorkPiece where some of the inputs and all of the outputs have specified types</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a55d2e82260ae0018be6e54ef9d2b89d8">   98</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; outTypes) :</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(-1), <span class="comment">// the number of inputs is unfixed</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(outTypes.size()), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the inputs types</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(outTypes)), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{}</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where some of the inputs are known with a known number of inputs and all of the outputs have specified types</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a90618c7fe7b71de5c8c5705f0838dddf">  107</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> num, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; outTypes) :</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(num), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(outTypes.size()), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the inputs types</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(outTypes)), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// Create a muq::Mdoeling::WorkPiece where some of the outputs and all of the inputs have specified types</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a7c5a564f4ccddf9c033806580c8dae4f">  116</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes) :</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(inTypes.size()), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(-1), <span class="comment">// the number of outputs is unfixed</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(inTypes)), <span class="comment">// fix the inputs types</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where some of the outputs with a known number of outputs and all of the inputs have specified types</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9a5aae9712cc5a6efb25787bfa7dd85b">  125</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> num) :</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(inTypes.size()), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(num), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">Types</a>(inTypes)), <span class="comment">// fix the inputs types</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// Create a muq::Mdoeling::WorkPiece where some of the inputs and some of the outputs have specified types</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a3225b63cbd10916704045a736cd03fa0">  134</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes) :</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(-1), <span class="comment">// the number of inputs is unfixed</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(-1), <span class="comment">// the number of outputs is unfixed</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">// Create a muq::Mdoeling::WorkPiece where some of the inputs and some of the outputs have specified types with a fixed number of inputs</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ab1df2681733ee678165765987a7e998a">  143</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numIn, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes) :</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(numIn), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(-1), <span class="comment">// the number of outputs is unfixed</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// Create a muq::Mdoeling::WorkPiece where some of the inputs and some of the outputs have specified types with a fixed number of outputs</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a15ebe9a2ddcafd88df75bee74f693670">  152</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numOut) :</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(-1), <span class="comment">// the number of inputs is unfixed</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(numOut), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// Create a muq::Modeling::WorkPiece where some of the inputs and some of the outputs have specified types with a fixed number of inputs and outputs</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a672aa406ed921732c65936ef835139c9">  161</a></span>&#160;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">WorkPiece::WorkPiece</a>(std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; inTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numIn, std::map&lt;unsigned int, std::string&gt; <span class="keyword">const</span>&amp; outTypes, <span class="keywordtype">int</span> <span class="keyword">const</span> numOut) :</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>(numIn), <span class="comment">// fix the number of inputs</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>(numOut), <span class="comment">// fix the number of outputs</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>(inTypes), <span class="comment">// fix the input types</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>(outTypes), <span class="comment">// fix the output types</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">SetID</a>()) <span class="comment">// the unique id of this WorkPiece</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{}</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#aeb5b7f9bc8cf8603225ec87a61185c20">  169</a></span>&#160;std::map&lt;unsigned int, std::string&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">WorkPiece::Types</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; typesVec)<span class="keyword"> const </span>{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// initialize the map from input/output number to input/output type</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  std::map&lt;unsigned int, std::string&gt; typesMap;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// populate the map with the elments in the type vector</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;typesVec.size(); ++i ) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    typesMap[i] = typesVec.at(i);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> typesMap;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">  181</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">WorkPiece::Types</a>(std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; vec)<span class="keyword"> const </span>{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// create a vector of the types</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  std::vector&lt;std::string&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  types.reserve(vec.size());</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// populate types with the type of each element of vec</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">for</span>( <span class="keyword">auto</span> it : vec ) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    types.push_back(it.type().name());</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// the types and vector should be the same size</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  assert(types.size()==vec.size());</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">types</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">  197</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">WorkPiece::SetID</a>() {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> workPieceId = 0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">return</span> ++workPieceId;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">  202</a></span>&#160;std::vector&lt;boost::any&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">WorkPiece::Evaluate</a>() {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;=0);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// clear the outputs</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a036933c5ed42f9e3e6153fd3f5b3486c">Clear</a>();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// evaluate the WorkPiece</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  std::vector&lt;std::reference_wrapper&lt;const boost::any&gt;&gt; emptyVec;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a69f9d681d24ab673caa82db3391de312">EvaluateImpl</a>(emptyVec);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// make sure we have the correct number of outputs</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// make sure the output types are correct</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>.size(); ++i ) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>[i].compare(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>[i].type().name())==0);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// return the outputs</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a89652dad942703adf8a102f06319eaca">  225</a></span>&#160;std::vector&lt;boost::any&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">WorkPiece::Evaluate</a>(<a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// we have new outputs</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a036933c5ed42f9e3e6153fd3f5b3486c">Clear</a>();</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// the inputs are set, so call evaluate with no inputs</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a69f9d681d24ab673caa82db3391de312">EvaluateImpl</a>(ins);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// make sure the output types are correct</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// check the output types</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>.size(); ++i ) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a18b78732f0da7f2b7e45be64eada84c1">CheckOutputType</a>(i, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>[i].type().name()));</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  </div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a3590084e7682b25a989d77a90be81c11">  246</a></span>&#160;std::vector&lt;boost::any&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">WorkPiece::Evaluate</a>(std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// make sure the input types are correct</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==ins.size());</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size(); ++i ) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">CheckInputType</a>(i, ins[i].type().name()));</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  </div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">Evaluate</a>(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">ToRefVector</a>(ins));</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">  259</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">WorkPiece::Jacobian</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  </div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// make sure the input types are correct</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==ins.size());</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size(); ++i ) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">CheckInputType</a>(i, ins[i].type().name()));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">Jacobian</a>(wrtIn, wrtOut, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">ToRefVector</a>(ins));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a7fb7922d5418e0d3d0a66ef776182d63">  276</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">WorkPiece::Jacobian</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; ins) {  </div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// clear the derivative information</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">ClearDerivatives</a>();</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// the inputs are set, so call evaluate with no inputs</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ffd72bfb6fd743bb429960317c5bc67">JacobianImpl</a>(wrtIn, wrtOut, ins);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// make sure the jacobian was computed (the optional jacobian member has a value)</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span>( !<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a> ) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: The Jacobian was not computed properly, make sure JacobianImpl gives muq::Modeling::WorkPiece::jacobian a value&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span>( <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a> ) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// return the jacobian (use the * operator because it is a boost::optional)</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// jacobian has not been computed --- return an empty boost optional</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ffd72bfb6fd743bb429960317c5bc67">  305</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ffd72bfb6fd743bb429960317c5bc67">WorkPiece::JacobianImpl</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// the name of the Eigen::VectorXd&#39;s</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keyword">const</span> std::string eigenType = <span class="keyword">typeid</span>(Eigen::VectorXd).name();</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// if both the input and output type is Eigen::VectorXd, default to finite difference</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span>( <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">InputType</a>(wrtIn, <span class="keyword">false</span>).compare(eigenType)==0 &amp;&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">OutputType</a>(wrtOut, <span class="keyword">false</span>).compare(eigenType)==0 ) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// compute the jacobian with finite difference</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4b0a31689c9156ddfa3a2d73e5d40116">JacobianByFD</a>(wrtIn, wrtOut, inputs);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a> = boost::none;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// invalid! The user has not implemented the Jacobian</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: No JacobianImpl function for muq::Modeling::WorkPiece implemented, cannot compute Jacobian&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4b0a31689c9156ddfa3a2d73e5d40116">  324</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4b0a31689c9156ddfa3a2d73e5d40116">WorkPiece::JacobianByFD</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs, <span class="keywordtype">double</span> <span class="keyword">const</span> relTol, <span class="keywordtype">double</span> <span class="keyword">const</span> minTol) {      </div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// the input we are computing the derivative wrt (the value will change so we need a hard copy)</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  boost::any in = inputs[wrtIn];</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// a reference to the input that we can change</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  Eigen::VectorXd&amp; inref = boost::any_cast&lt;Eigen::VectorXd&amp;&gt;(in);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// get a copy of the inputs (note, we are only copying the references)</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;const boost::any&gt;</a> tempIns = inputs;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  tempIns[wrtIn] = in;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// compute the base result</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keyword">const</span> std::vector&lt;boost::any&gt;&amp; base = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">Evaluate</a>(inputs);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// const reference to the output of interest</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keyword">const</span> Eigen::VectorXd&amp; outbase = boost::any_cast&lt;<span class="keyword">const</span> Eigen::VectorXd&amp;&gt;(base[wrtOut]);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// initalize the jacobian and a reference that we can change</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a> = (Eigen::MatrixXd)Eigen::MatrixXd::Zero(outbase.size(), inref.size());</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  Eigen::MatrixXd&amp; jac = boost::any_cast&lt;Eigen::MatrixXd&amp;&gt;(*jacobian); <span class="comment">// use * operator because it is a boost::optional</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// loop thorugh the inputs (columns of the Jacobian)</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> col=0; col&lt;inref.size(); ++col ) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// compute the step length</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> dx = std::fmax(minTol, relTol*inref(col));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// increment the col&#39;s input (change the reference to the boost any)</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    inref(col) += dx;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// compute the perturbed result</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">const</span> std::vector&lt;boost::any&gt;&amp; plus = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">Evaluate</a>(tempIns);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// const reference to the output of interest</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">const</span> Eigen::VectorXd&amp; outplus = boost::any_cast&lt;<span class="keyword">const</span> Eigen::VectorXd&amp;&gt;(plus[wrtOut]);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// compute the Jacobian for this column</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    jac.col(col) = (outplus-outbase)/dx;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// reset the the col&#39;s input</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    inref(col) -= dx;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a16129bc7dd71199de0ca588f3203bddc">  367</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a16129bc7dd71199de0ca588f3203bddc">WorkPiece::JacobianAction</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// clear the derivative information</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">ClearDerivatives</a>();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// make sure the input types are correct</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==ins.size());</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size(); ++i ) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">CheckInputType</a>(i, ins[i].type().name()));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  </div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a16129bc7dd71199de0ca588f3203bddc">JacobianAction</a>(wrtIn, wrtOut, vec, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">ToRefVector</a>(ins));</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a48fba4dac84ce07e07390830cf755081">  387</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a16129bc7dd71199de0ca588f3203bddc">WorkPiece::JacobianAction</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  </div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// the inputs are set, so call evaluate with no inputs</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a179de0ee566f0b985f40de3204cb84c3">JacobianActionImpl</a>(wrtIn, wrtOut, vec, ins);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  </div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// make sure the jacobian was computed (the optional jacobian member has a value)</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span>( !<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">jacobianAction</a> ) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: The Jacobian was not computed properly, make sure JacobianActionImpl gives muq::Modeling::WorkPiece::jacobianAction a value&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">jacobianAction</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// return the jacobian action (use the * operator because it is a boost::optional)</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">jacobianAction</a>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a179de0ee566f0b985f40de3204cb84c3">  408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a179de0ee566f0b985f40de3204cb84c3">WorkPiece::JacobianActionImpl</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="comment">// the name of the Eigen::VectorXd&#39;s</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keyword">const</span> std::string eigenType = <span class="keyword">typeid</span>(Eigen::VectorXd).name();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// if both the input and output type is Eigen::VectorXd, default to finite difference</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span>( eigenType.compare(vec.type().name())==0 &amp;&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">InputType</a>(wrtIn, <span class="keyword">false</span>).compare(eigenType)==0 &amp;&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">OutputType</a>(wrtOut, <span class="keyword">false</span>).compare(eigenType)==0 ) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// compute the action of the jacobian using finite differences</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#afa0ff8095c8e83f1509f586b72f451f9">JacobianActionByFD</a>(wrtIn, wrtOut, vec, inputs);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    </div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// invalid! The user has not implemented the JacobianAction</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: No JacobianActionImpl function for muq::Modeling::WorkPiece implemented, cannot compute the action of the Jacobian&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#afa0ff8095c8e83f1509f586b72f451f9">  425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#afa0ff8095c8e83f1509f586b72f451f9">WorkPiece::JacobianActionByFD</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// compute the jacobian matrix with finite differences (if the jacobian is implemented then this is actually exact)</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">Jacobian</a>(wrtIn, wrtOut, inputs);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// get a reference to the jacobian and the input vector</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keyword">const</span> Eigen::MatrixXd&amp; jac = boost::any_cast&lt;<span class="keyword">const</span> Eigen::MatrixXd&amp;&gt;(*jacobian); <span class="comment">// * operator because it is a boost::optional</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keyword">const</span> Eigen::VectorXd&amp; vecref = boost::any_cast&lt;<span class="keyword">const</span> Eigen::VectorXd&amp;&gt;(vec);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  </div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// check input sizes</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  assert(jac.cols()==vecref.size());</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  </div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// apply the jacobian to the input vector</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">jacobianAction</a> = (Eigen::VectorXd)(jac*vecref);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#af10602627b87c24a90e9bf0404131980">  441</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#af10602627b87c24a90e9bf0404131980">WorkPiece::JacobianTransposeAction</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// clear the derivative information</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">ClearDerivatives</a>();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// make sure the input types are correct</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==0 || <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size()==ins.size());</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.size(); ++i ) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">CheckInputType</a>(i, ins[i].type().name()));</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  </div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#af10602627b87c24a90e9bf0404131980">JacobianTransposeAction</a>(wrtIn, wrtOut, vec, <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">ToRefVector</a>(ins));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#af29f691911579f1c8be724e61909d334">  461</a></span>&#160;boost::any <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#af10602627b87c24a90e9bf0404131980">WorkPiece::JacobianTransposeAction</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; ins) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// make sure we have the correct number of inputs</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || ins.size()==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// make sure the input and output number are valid</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || wrtIn&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || wrtOut&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  </div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// the inputs are set, so call evaluate with no inputs</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae53caa6ea233de23e37855b177557bcf">JacobianTransposeActionImpl</a>(wrtIn, wrtOut, vec, ins);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  </div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// make sure the jacobian was computed (the optional jacobian member has a value)</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span>( !<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">jacobianTransposeAction</a> ) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: The Jacobian was not computed properly, make sure JacobianTransposeActionImpl gives muq::Modeling::WorkPiece::jacobianTransposeAction a value&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">jacobianTransposeAction</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// return the jacobian action (use the * operator because it is a boost::optional)</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">jacobianTransposeAction</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae53caa6ea233de23e37855b177557bcf">  482</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ae53caa6ea233de23e37855b177557bcf">WorkPiece::JacobianTransposeActionImpl</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// the name of the Eigen::VectorXd&#39;s</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">const</span> std::string eigenType = <span class="keyword">typeid</span>(Eigen::VectorXd).name();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// if both the input and output type is Eigen::VectorXd, default to finite difference</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordflow">if</span>( eigenType.compare(vec.type().name())==0 &amp;&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">InputType</a>(wrtIn, <span class="keyword">false</span>).compare(eigenType)==0 &amp;&amp; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">OutputType</a>(wrtOut, <span class="keyword">false</span>).compare(eigenType)==0 ) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// compute the action of the jacobian transpose using finite differences</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac53135b7412fc2c3ecf0fc5da73612af">JacobianTransposeActionByFD</a>(wrtIn, wrtOut, vec, inputs);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// invalid! The user has not implemented the JacobianAction</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: No JacobianTransposeActionImpl function for muq::Modeling::WorkPiece implemented, cannot compute the action of the Jacobian transpose&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac53135b7412fc2c3ecf0fc5da73612af">  499</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac53135b7412fc2c3ecf0fc5da73612af">WorkPiece::JacobianTransposeActionByFD</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtIn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> wrtOut, boost::any <span class="keyword">const</span>&amp; vec, <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;boost::any&gt;</a> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// compute the jacobian matrix with finite differences (if the jacobian is implemented this is exact)</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">Jacobian</a>(wrtIn, wrtOut, inputs);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  </div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// get a reference to the jacobian and the input vector</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">const</span> Eigen::MatrixXd&amp; jac = boost::any_cast&lt;<span class="keyword">const</span> Eigen::MatrixXd&amp;&gt;(*jacobian); <span class="comment">// * operator because it is a boost::optional</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keyword">const</span> Eigen::VectorXd&amp; vecref = boost::any_cast&lt;<span class="keyword">const</span> Eigen::VectorXd&amp;&gt;(vec);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// check input sizes</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  assert(jac.rows()==vecref.size());</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  </div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// apply the jacobian to the input vector</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">jacobianTransposeAction</a> = (Eigen::VectorXd)(jac.transpose()*vecref);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9ac910bb7f975f5cb2e9a468e4e9a05b">  515</a></span>&#160;std::string <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9ac910bb7f975f5cb2e9a468e4e9a05b">WorkPiece::Name</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordtype">int</span> status;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  std::stringstream ss;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// the unique name is the name of the (child) class + &quot;_{ID number}&quot;</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  ss &lt;&lt; abi::__cxa_demangle(<span class="keyword">typeid</span>(*this).name(), 0, 0, &amp;status) &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; <span class="keywordtype">id</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> ss.str();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">  525</a></span>&#160;std::string <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">WorkPiece::InputType</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> inputNum, <span class="keywordtype">bool</span> <span class="keyword">const</span> demangle)<span class="keyword"> const </span>{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// make sure the inputNum is less than the number of inputs or that we don&#39;t know the number of inputs</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>&lt;0 || inputNum&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">numInputs</a>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// an iterator to the input type</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.find(inputNum);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// we don&#39;t know the input type</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span>( it==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.end() ) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// make it human readable</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordflow">if</span>( demangle ) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> boost::core::demangle(it-&gt;second.c_str());</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// return the input type</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> it-&gt;second;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">  546</a></span>&#160;std::string <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">WorkPiece::OutputType</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> outputNum, <span class="keywordtype">bool</span> <span class="keyword">const</span> demangle)<span class="keyword"> const </span>{</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// make sure the outputNum is less than the number of outputs or that we don&#39;t know the number of outputs</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  assert(<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>&lt;0 || outputNum&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">numOutputs</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// an iterator to the output type</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>.find(outputNum);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// we don&#39;t know the output type</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span>( it==<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>.end() ) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// make it human readable</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span>( demangle ) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> boost::core::demangle(it-&gt;second.c_str());</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// return the output type</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> it-&gt;second;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#aace8899d9366385222f4160f0ed02ce5">  567</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aace8899d9366385222f4160f0ed02ce5">WorkPiece::ID</a>()<span class="keyword"> const</span>{</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">id</a>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a3c8ad8380c3754879c0d7ab39848d5a9">  571</a></span>&#160;std::map&lt;unsigned int, std::string&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a3c8ad8380c3754879c0d7ab39848d5a9">WorkPiece::OutputTypes</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8c3cf0fd6be7ddc9eecbe31f4d24795b">  575</a></span>&#160;std::map&lt;unsigned int, std::string&gt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a8c3cf0fd6be7ddc9eecbe31f4d24795b">WorkPiece::InputTypes</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">  579</a></span>&#160;<a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;const boost::any&gt;</a> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">WorkPiece::ToRefVector</a>(std::vector&lt;boost::any&gt; <span class="keyword">const</span>&amp; anyVec)<span class="keyword"> const </span>{</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;           </div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">ref_vector&lt;const boost::any&gt;</a> refs;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  refs.reserve(anyVec.size());</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// populate the input vector</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;anyVec.size(); ++i)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    refs.push_back(std::cref(anyVec.at(i)));</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">return</span> refs;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a036933c5ed42f9e3e6153fd3f5b3486c">  591</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a036933c5ed42f9e3e6153fd3f5b3486c">WorkPiece::Clear</a>() {  </div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// we have new outputs --- some WorkPiece&#39;s have the outputs stored in a child class so we don&#39;t always want to clear them</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span>( <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aaff4720ac0b39f57bc79ae3aeb0c3ecb">clearOutputs</a> ) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// destroy the output</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>.size(); ++i ) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      std::cout &lt;&lt; <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>[i].type().name() &lt;&lt; std::endl;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// clear the output</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">outputs</a>.clear();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">  604</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">WorkPiece::ClearDerivatives</a>() {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// make sure we actually want to clear the derivatives</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">if</span>( !<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#af29a8b1c9e969e9d98cca9e9f4036f7a">clearDerivatives</a> ) { <span class="keywordflow">return</span>; }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  </div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// clear the jacobian</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">jacobian</a> = boost::none;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// clear the jacobian action</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">jacobianAction</a> = boost::none;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// clear the jacobian transpose action</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">jacobianTransposeAction</a> = boost::none;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">  618</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">WorkPiece::CheckInputType</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> inputNum, std::string <span class="keyword">const</span>&amp; type)<span class="keyword"> const </span>{</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// find the input type</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.find(inputNum);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  </div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// check to see that the types match (or that we don&#39;t know the type)</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span>( it!=<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">inputTypes</a>.end() &amp;&amp; it-&gt;second.compare(type)!=0 ) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: Input types do not match.&quot;</span> &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;\tGiven input: &quot;</span> &lt;&lt; boost::core::demangle(type.c_str()) &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; boost::core::demangle(it-&gt;second.c_str()) &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  </div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="classmuq_1_1Modeling_1_1WorkPiece.html#a18b78732f0da7f2b7e45be64eada84c1">  631</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a18b78732f0da7f2b7e45be64eada84c1">WorkPiece::CheckOutputType</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> outputNum, std::string <span class="keyword">const</span>&amp; type)<span class="keyword"> const </span>{</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// find the output type</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>.find(outputNum);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  </div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// check to see that the types match (or that we don&#39;t know the type)</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span>( it!=<a class="code" href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">outputTypes</a>.end() &amp;&amp; it-&gt;second.compare(type)!=0 ) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;ERROR: Output types do not match.&quot;</span> &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;\tGiven output: &quot;</span> &lt;&lt; boost::core::demangle(type.c_str()) &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; boost::core::demangle(it-&gt;second.c_str()) &lt;&lt; std::endl &lt;&lt; std::endl;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div><div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ac53135b7412fc2c3ecf0fc5da73612af"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ac53135b7412fc2c3ecf0fc5da73612af">muq::Modeling::WorkPiece::JacobianTransposeActionByFD</a></div><div class="ttdeci">void JacobianTransposeActionByFD(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, ref_vector&lt; boost::any &gt; const &amp;inputs)</div><div class="ttdoc">Compute the action of the Jacobian transpose using finite differences. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00499">WorkPiece.cpp:499</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a2f99d5fd76cf310df2514c3833e53510"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a2f99d5fd76cf310df2514c3833e53510">muq::Modeling::WorkPiece::Jacobian</a></div><div class="ttdeci">boost::any Jacobian(unsigned int const wrtIn, unsigned int const wrtOut, std::vector&lt; boost::any &gt; const &amp;ins)</div><div class="ttdoc">Evaluate the Jacobian of this muq::Modeling::WorkPiece using references to the inputs. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00259">WorkPiece.cpp:259</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_af10602627b87c24a90e9bf0404131980"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#af10602627b87c24a90e9bf0404131980">muq::Modeling::WorkPiece::JacobianTransposeAction</a></div><div class="ttdeci">boost::any JacobianTransposeAction(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, std::vector&lt; boost::any &gt; const &amp;ins)</div><div class="ttdoc">Evaluate the action of the Jacobian transpose of this muq::Modeling::WorkPiece using references to th...</div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00441">WorkPiece.cpp:441</a></div></div>
<div class="ttc" id="WorkPiece_8h_html"><div class="ttname"><a href="WorkPiece_8h.html">WorkPiece.h</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ae53caa6ea233de23e37855b177557bcf"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ae53caa6ea233de23e37855b177557bcf">muq::Modeling::WorkPiece::JacobianTransposeActionImpl</a></div><div class="ttdeci">virtual void JacobianTransposeActionImpl(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, ref_vector&lt; boost::any &gt; const &amp;inputs)</div><div class="ttdoc">User-implemented function that to compute the action of the Jacobian transpose. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00482">WorkPiece.cpp:482</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ac1e82b2ddf5702f283ed68ba7ddb407a"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ac1e82b2ddf5702f283ed68ba7ddb407a">muq::Modeling::WorkPiece::jacobian</a></div><div class="ttdeci">boost::optional&lt; boost::any &gt; jacobian</div><div class="ttdoc">The Jacobian. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00491">WorkPiece.h:491</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a0e95ed173d0868a8fb3ddf8ac7647ad1"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a0e95ed173d0868a8fb3ddf8ac7647ad1">muq::Modeling::WorkPiece::SetID</a></div><div class="ttdeci">unsigned int SetID()</div><div class="ttdoc">Set the ID number, must be called by the constructor. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00197">WorkPiece.cpp:197</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a5d23e5fac3e8a48f322796face4cec12"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a5d23e5fac3e8a48f322796face4cec12">muq::Modeling::WorkPiece::OutputType</a></div><div class="ttdeci">std::string OutputType(unsigned int outputNum, bool const demangle=true) const</div><div class="ttdoc">Get the output type (if we know it) for a specific output. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00546">WorkPiece.cpp:546</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a3c8ad8380c3754879c0d7ab39848d5a9"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a3c8ad8380c3754879c0d7ab39848d5a9">muq::Modeling::WorkPiece::OutputTypes</a></div><div class="ttdeci">std::map&lt; unsigned int, std::string &gt; OutputTypes() const</div><div class="ttdoc">Get the output types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00571">WorkPiece.cpp:571</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aace8899d9366385222f4160f0ed02ce5"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aace8899d9366385222f4160f0ed02ce5">muq::Modeling::WorkPiece::ID</a></div><div class="ttdeci">unsigned int ID() const</div><div class="ttdoc">Get the unique ID number. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00567">WorkPiece.cpp:567</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aee4f92d2ce4606258361221f3886fe88"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aee4f92d2ce4606258361221f3886fe88">muq::Modeling::WorkPiece::jacobianTransposeAction</a></div><div class="ttdeci">boost::optional&lt; boost::any &gt; jacobianTransposeAction</div><div class="ttdoc">The action of the Jacobian transpose. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00503">WorkPiece.h:503</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_af29a8b1c9e969e9d98cca9e9f4036f7a"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#af29a8b1c9e969e9d98cca9e9f4036f7a">muq::Modeling::WorkPiece::clearDerivatives</a></div><div class="ttdeci">bool clearDerivatives</div><div class="ttdoc">Clear derivatives every time Jacobian, JacobianAction, or JacobianActionTranspose is called...</div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00479">WorkPiece.h:479</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html">muq::Modeling::WorkPiece</a></div><div class="ttdoc">Base class for MUQ&amp;#39;s modelling envronment. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00027">WorkPiece.h:27</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aff5b1444cc08f0ef4536128f31eb2c82"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aff5b1444cc08f0ef4536128f31eb2c82">muq::Modeling::WorkPiece::numInputs</a></div><div class="ttdeci">int numInputs</div><div class="ttdoc">The number of inputs. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00455">WorkPiece.h:455</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a4e05aa4ae845066afb22374d60e5fe29"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a4e05aa4ae845066afb22374d60e5fe29">muq::Modeling::WorkPiece::id</a></div><div class="ttdeci">const unsigned int id</div><div class="ttdoc">A unique ID number assigned by the constructor. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00798">WorkPiece.h:798</a></div></div>
<div class="ttc" id="namespacemuq_1_1Modeling_html_adfe4fcf581840b1dec0ceb159f2acf65"><div class="ttname"><a href="namespacemuq_1_1Modeling.html#adfe4fcf581840b1dec0ceb159f2acf65">muq::Modeling::ref_vector</a></div><div class="ttdeci">std::vector&lt; std::reference_wrapper&lt; const T &gt; &gt; ref_vector</div><div class="ttdoc">A vector of references to something ... </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00024">WorkPiece.h:24</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aa8124b6dd2173615e6c53b688a16e473"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aa8124b6dd2173615e6c53b688a16e473">muq::Modeling::WorkPiece::ToRefVector</a></div><div class="ttdeci">ref_vector&lt; const boost::any &gt; ToRefVector(std::vector&lt; boost::any &gt; const &amp;anyVec) const</div><div class="ttdoc">Create vector of references from a vector of boost::any&amp;#39;s. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00579">WorkPiece.cpp:579</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a16129bc7dd71199de0ca588f3203bddc"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a16129bc7dd71199de0ca588f3203bddc">muq::Modeling::WorkPiece::JacobianAction</a></div><div class="ttdeci">boost::any JacobianAction(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, std::vector&lt; boost::any &gt; const &amp;ins)</div><div class="ttdoc">Evaluate the action of the Jacobian of this muq::Modeling::WorkPiece using references to the inputs...</div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00367">WorkPiece.cpp:367</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a408ae7233fc5c877e579271106dc9bac"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a408ae7233fc5c877e579271106dc9bac">muq::Modeling::WorkPiece::CheckInputType</a></div><div class="ttdeci">bool CheckInputType(unsigned int const inputNum, std::string const &amp;type) const</div><div class="ttdoc">Check the input type. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00618">WorkPiece.cpp:618</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a8a71843e4ae3aad6362df03f95713c08"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a8a71843e4ae3aad6362df03f95713c08">muq::Modeling::WorkPiece::Evaluate</a></div><div class="ttdeci">std::vector&lt; boost::any &gt; Evaluate()</div><div class="ttdoc">Evaluate this muq::Modeling::WorkPiece in the case that there are no inputs. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00202">WorkPiece.cpp:202</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a4b0a31689c9156ddfa3a2d73e5d40116"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a4b0a31689c9156ddfa3a2d73e5d40116">muq::Modeling::WorkPiece::JacobianByFD</a></div><div class="ttdeci">void JacobianByFD(unsigned int const wrtIn, unsigned int const wrtOut, ref_vector&lt; boost::any &gt; const &amp;inputs, double const relTol=1.0e-4, const double minTol=1.0e-6)</div><div class="ttdoc">Compute the Jacobian using finite differences. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00324">WorkPiece.cpp:324</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_abd99b2efa8fc07d816697dc8e42278ed"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#abd99b2efa8fc07d816697dc8e42278ed">muq::Modeling::WorkPiece::numOutputs</a></div><div class="ttdeci">int numOutputs</div><div class="ttdoc">The number of outputs. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00458">WorkPiece.h:458</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ae009e41bde2aab7dd6c647fbe9447083"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ae009e41bde2aab7dd6c647fbe9447083">muq::Modeling::WorkPiece::types</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; types</div><div class="ttdoc">A map of common types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00807">WorkPiece.h:807</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aa11788aa60c1efad9253e98c9936dfad"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aa11788aa60c1efad9253e98c9936dfad">muq::Modeling::WorkPiece::InputType</a></div><div class="ttdeci">std::string InputType(unsigned int inputNum, bool const demangle=true) const</div><div class="ttdoc">Get the input type (if we know it) for a specific input. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00525">WorkPiece.cpp:525</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a18b78732f0da7f2b7e45be64eada84c1"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a18b78732f0da7f2b7e45be64eada84c1">muq::Modeling::WorkPiece::CheckOutputType</a></div><div class="ttdeci">bool CheckOutputType(unsigned int const outputNum, std::string const &amp;type) const</div><div class="ttdoc">Check the output type. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00631">WorkPiece.cpp:631</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a69f9d681d24ab673caa82db3391de312"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a69f9d681d24ab673caa82db3391de312">muq::Modeling::WorkPiece::EvaluateImpl</a></div><div class="ttdeci">virtual void EvaluateImpl(ref_vector&lt; boost::any &gt; const &amp;inputs)=0</div><div class="ttdoc">User-implemented function that determines the behavior of this muq::Modeling::WorkPiece. </div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a146b853fa89ac7c35958c568bde98d56"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a146b853fa89ac7c35958c568bde98d56">muq::Modeling::WorkPiece::outputTypes</a></div><div class="ttdeci">std::map&lt; unsigned int, std::string &gt; outputTypes</div><div class="ttdoc">The output types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00515">WorkPiece.h:515</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aea484b52a04251c526778716bbac8c77"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aea484b52a04251c526778716bbac8c77">muq::Modeling::WorkPiece::outputs</a></div><div class="ttdeci">std::vector&lt; boost::any &gt; outputs</div><div class="ttdoc">The outputs. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00485">WorkPiece.h:485</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a8ffd72bfb6fd743bb429960317c5bc67"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ffd72bfb6fd743bb429960317c5bc67">muq::Modeling::WorkPiece::JacobianImpl</a></div><div class="ttdeci">virtual void JacobianImpl(unsigned int const wrtIn, unsigned int const wrtOut, ref_vector&lt; boost::any &gt; const &amp;inputs)</div><div class="ttdoc">User-implemented function that to compute the Jacobian. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00305">WorkPiece.cpp:305</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a179de0ee566f0b985f40de3204cb84c3"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a179de0ee566f0b985f40de3204cb84c3">muq::Modeling::WorkPiece::JacobianActionImpl</a></div><div class="ttdeci">virtual void JacobianActionImpl(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, ref_vector&lt; boost::any &gt; const &amp;inputs)</div><div class="ttdoc">User-implemented function that to compute the action of the Jacobian. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00408">WorkPiece.cpp:408</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_afa0ff8095c8e83f1509f586b72f451f9"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#afa0ff8095c8e83f1509f586b72f451f9">muq::Modeling::WorkPiece::JacobianActionByFD</a></div><div class="ttdeci">void JacobianActionByFD(unsigned int const wrtIn, unsigned int const wrtOut, boost::any const &amp;vec, ref_vector&lt; boost::any &gt; const &amp;input)</div><div class="ttdoc">Compute the action of the Jacobian using finite differences. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00425">WorkPiece.cpp:425</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a9ac910bb7f975f5cb2e9a468e4e9a05b"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a9ac910bb7f975f5cb2e9a468e4e9a05b">muq::Modeling::WorkPiece::Name</a></div><div class="ttdeci">std::string Name() const</div><div class="ttdoc">Get the (unique) name of this work piece. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00515">WorkPiece.cpp:515</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a036933c5ed42f9e3e6153fd3f5b3486c"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a036933c5ed42f9e3e6153fd3f5b3486c">muq::Modeling::WorkPiece::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdoc">Clear muq::Modeling::WorkPiece::outputs when muq::Modeling::Evaluate is called. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00591">WorkPiece.cpp:591</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004a4754416374f1610d2625cef065a160cd">muq::Modeling::WorkPiece::Inputs</a></div><div class="ttdoc">The constructor fixes the input number and possibly the types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00038">WorkPiece.h:38</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a580ccf07a8afcec89100cdd9e5c4a034"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a580ccf07a8afcec89100cdd9e5c4a034">muq::Modeling::WorkPiece::inputTypes</a></div><div class="ttdeci">std::map&lt; unsigned int, std::string &gt; inputTypes</div><div class="ttdoc">The input types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00509">WorkPiece.h:509</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a5b36936dbde095c51d9a618157002ddc"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a5b36936dbde095c51d9a618157002ddc">muq::Modeling::WorkPiece::WorkPiece</a></div><div class="ttdeci">WorkPiece()</div><div class="ttdoc">Create a muq::Modeling::WorkPiece with no fixed number of inputs and outputs and variable input/outpu...</div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00009">WorkPiece.cpp:9</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004acf9369849e3bd6f10e51b058e9b35468">muq::Modeling::WorkPiece::Outputs</a></div><div class="ttdoc">The constructor fixes the output number and possibly the types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00040">WorkPiece.h:40</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ad16fa39f72eba50f06a070b7ac461004"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ad16fa39f72eba50f06a070b7ac461004">muq::Modeling::WorkPiece::Fix</a></div><div class="ttdeci">Fix</div><div class="ttdoc">Does the constructor fix the inputs or the outputs? </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00036">WorkPiece.h:36</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a8c3cf0fd6be7ddc9eecbe31f4d24795b"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a8c3cf0fd6be7ddc9eecbe31f4d24795b">muq::Modeling::WorkPiece::InputTypes</a></div><div class="ttdeci">std::map&lt; unsigned int, std::string &gt; InputTypes() const</div><div class="ttdoc">Get the input types. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00575">WorkPiece.cpp:575</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_ad132fdb175719a7f228c7bf4d4885a8c"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#ad132fdb175719a7f228c7bf4d4885a8c">muq::Modeling::WorkPiece::ClearDerivatives</a></div><div class="ttdeci">void ClearDerivatives()</div><div class="ttdoc">Clear muq::Modeling::WorkPiece::outputs and muq::Modeling::WorkPiece::jacobian, muq::Modeling::WorkPi...</div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00604">WorkPiece.cpp:604</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_aaff4720ac0b39f57bc79ae3aeb0c3ecb"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#aaff4720ac0b39f57bc79ae3aeb0c3ecb">muq::Modeling::WorkPiece::clearOutputs</a></div><div class="ttdeci">bool clearOutputs</div><div class="ttdoc">Clear outputs every time Evaluate is called. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00476">WorkPiece.h:476</a></div></div>
<div class="ttc" id="namespacemuq_1_1Modeling_html"><div class="ttname"><a href="namespacemuq_1_1Modeling.html">muq::Modeling</a></div><div class="ttdef"><b>Definition:</b> <a href="AnyAlgebra_8h_source.html#l00021">AnyAlgebra.h:21</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a8ca44607482280b03fccd11932cbe809"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a8ca44607482280b03fccd11932cbe809">muq::Modeling::WorkPiece::Types</a></div><div class="ttdeci">std::vector&lt; std::string &gt; Types(std::vector&lt; boost::any &gt; const &amp;vec) const</div><div class="ttdoc">Get the types from a vector of boost::any&amp;#39;s. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8cpp_source.html#l00181">WorkPiece.cpp:181</a></div></div>
<div class="ttc" id="classmuq_1_1Modeling_1_1WorkPiece_html_a9563fef2554aac09b3630491e23c8fa3"><div class="ttname"><a href="classmuq_1_1Modeling_1_1WorkPiece.html#a9563fef2554aac09b3630491e23c8fa3">muq::Modeling::WorkPiece::jacobianAction</a></div><div class="ttdeci">boost::optional&lt; boost::any &gt; jacobianAction</div><div class="ttdoc">The action of the Jacobian. </div><div class="ttdef"><b>Definition:</b> <a href="WorkPiece_8h_source.html#l00497">WorkPiece.h:497</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="dir_7936de9f533306ff83980b4ce81a1bc9.html">Modeling</a></li><li class="navelem"><a class="el" href="dir_8fd1022be88eb4b702de339e2a445bbe.html">src</a></li><li class="navelem"><a class="el" href="WorkPiece_8cpp.html">WorkPiece.cpp</a></li>
    <li class="footer">Generated on Mon Jul 31 2017 13:57:07 for MUQ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
